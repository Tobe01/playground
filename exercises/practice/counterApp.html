<!DOCTYPE html>
<html>
  <head>
    <title>Counter</title>

    <style>
       button{
        cursor: pointer;
        background-color: rgb(25, 135, 84);
        border: none;
        color: white;
        padding: 8px 15px;
        border-radius: 5px;
       }

       .buttonCount{
         gap: 8px;
         background-color: rgb(222, 222, 222);
         display: flex;
         align-items: center;
         justify-content: center;
         height: 100vh;
       }

    </style>

  </head>
  <body>
    <div class="js-root"></div>

    <script src="https://unpkg.com/supersimpledev/react.js"></script>
    <script src="https://unpkg.com/supersimpledev/react-dom.js"></script>

    <script src="https://unpkg.com/supersimpledev/dayjs.js"></script>

    <script src="https://unpkg.com/supersimpledev/chatbot.js"></script> 

    <script src="https://unpkg.com/supersimpledev/babel.js"></script>
    <script type="text/babel">

      function Counter(){
        
        // Innitiate state
        const [ count, setCount ] = React.useState(0);
        const [ autoClicking, setAutoClicking ] = React.useState(false);

        // Function to update count
        function updateCount(){
          setCount(count + 1);
        }

        // function to reset count
        function resetCount(){
          setCount(0)
        }

         // Toggle auto-clicking
        function toggleAutoClick(){
          setAutoClicking(!autoClicking);
        }
        
        React.useEffect(() =>{
          if (autoClicking) {
            const interval = setInterval(() => {
              // Use functional update to avoid stale closure
              setCount(prevCount => prevCount + 1);
            }, 1000);
            
            // Cleanup interval when component unmounts or autoClicking changes
            return () => clearInterval(interval);
          }
        }, [autoClicking]);

        return(
          <div className="buttonCount">
           { count <= 1 ? <button onClick={updateCount}>Clicked {count} time</button> : <button onClick={updateCount}>Clicked {count} times</button>}
           <button onClick={resetCount}>Reset</button>
           <button onClick={toggleAutoClick}>Auto Click</button>
          </div>
        );
      }

      function App(){
        return(
          <>
           <Counter />
          </>
        )
      }

      const root = document.querySelector('.js-root');
      ReactDOM.createRoot(root).render(<App />);
    </script>
  </body>
</html>